<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <script type="text/javascript" src="d3/d3.js"></script>
        <script type="text/javascript">
          d3.select("head").append("title").text("Child vaccination rates");
        </script>
        <style type="text/css">

        svg.rect {
          display: inline-block;
          width: 20px;
          height: 75px;	/* Gets overriden by D3-assigned height below */
          background-color: teal;
          margin-right: 2px;
        }

        </style>
    </head>
    <body>
        <script type="text/javascript">
        // Add title
        d3.select("body").append("h1").text("Child vaccination rates");

        // Get data and put into SVG
        d3.json("output.json").then(function(data) {
            // d3.select("body").selectAll("p").data(data).enter().append("p").text(circle);
            // console.log(data[0]["LOCATION"]);

            // Set width and height for SVG
            var w = 750;
            var h = 200;
            var barPadding = 1;

            // Make SVG
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

            svg.selectAll("rect")
               .data(data)
               .enter()
               .append("rect")
               .attr("x", function(d, i) {
                 return i * (w / data.length);
               })
               .attr("y", function(data) {
                 return h - (data["VALUE"] * 2);
               })
               .attr("width", w / data.length - barPadding)
               .attr("height", function(data) {
                 return h;
               })
               .attr("fill", "green");

            // Add data to top of bars
            svg.selectAll("text")
               .data(data)
               .enter()
               .append("text")
               .text(function(data) {
                 return data["VALUE"];
               })
               .attr("x", function(d, i) {
                 return i * (w / data.length) + 5;
               })
               .attr("y", function(data) {
                 return h - (data["VALUE"] * 2) + 15;
               })
               .attr("font-family", "sans-serif")
               .attr("font-size", "11px")
               .attr("fill", "white");
          });

          // Add name and data description etc.
          d3.select("body").append("p").text("All OECD countries have established vaccination programmes based on their interpretation of the risks and benefits of each vaccine. There is strong evidence that vaccines provide safe and effective protection against diseases such as diphtheria, tetanus, pertussis (whooping cough), and measles. Childhood vaccination rates reflect the percentage of children that receive the respective vaccination in the recommended timeframe. The age of complete immunisation differs across countries due to different immunisation schedules. This indicator is presented for measles and for diphtheria, tetanus and pertussis. It is measured as a percentage of children at around age 1.");
          d3.select("body").append("p").text("Machiel Cligge");
          d3.select("body").append("p").text("10772006");
        </script>
    </body>
</html>
